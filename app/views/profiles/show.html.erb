<section class="profile-top-section bg-white">
  <div class="d-grid banner-grid">
  <div class="banner-grid">
    <div class="profile-top-left">
      <% if @profile.image.attached? %>
        <%= cl_image_tag @profile.image.key, height: 300, width: 400, crop: :fill %>
      <% else %>
        <img class="profile-pic-index" src="https://image.flaticon.com/icons/svg/206/206853.svg" alt="">
      <% end %>
    </div>
    <div class="d-flex flex-column align-items-left profile-top-right">
      <h2 class="mb-6"><%= @profile.first_name %> <%= @profile.last_name %></h2>
      <div class="info-container">
          <h3>Username:</h3>
          <p><%= @profile.user_name %></p>
      </div>
      <div class="info-container">
          <h3>Age:</h3>
          <p><%= @profile.age %></p>
      </div>
      <div class="info-container">
          <h3>Bio:</h3>
          <p><%= @profile.bio %></p>
      </div>
      <div class="social-media-container">
        <% if @profile.instagram?  %>
          <%= link_to "", @profile.instagram, class: "fab fa-instagram fa-3x" %>
        <% end %>
        <% if @profile.linkedin?  %>
          <%= link_to "", @profile.linkedin, class: "fab fa-linkedin-in fa-3x" %>
        <% end %>
      </div>

      <br>
      <div class="edit-profile-button">
        <p><% if policy(@profile).edit? %><%= link_to "Edit my Profile", edit_user_registration_path(@profile), class: "btn-standard" %><% end %></p>
      </div>
    </div>
  </div>
</section>

<section class="profile-requests-section">
  <h2>My requests</h2>
  <div class="profile-cards">
    <div class="row">
      <% @my_requests.each do |request| %>
        <div class="col-4">
          <div class="card card-profile">
            <div class="card-body card-body-profile">
              <% if request.event.photo.attached?  %>
                <%= cl_image_tag request.event.photo.key, class: "card-img-event-profile" %>
              <% else %>
                <img class="card-img-event-profile" src="https://image.flaticon.com/icons/svg/206/206853.svg" alt="">
              <% end %>
              <div class="row">
                <div class="col-4 user-name-profile">
                  <p><%= request.event.user.first_name %>, <%= request.event.user.age %></p>
                </div>
                <div class="col-4 profile-pic-profile">
                  <% if request.event.user.image.attached? %>
                    <%= cl_image_tag request.event.user.image.key, class: "profile-pic-index" %>
                  <% else %>
                    <img class="profile-pic-index" src="https://image.flaticon.com/icons/svg/206/206853.svg" alt="">
                  <% end %>
                </div>
                <div class="col-4 user-social-icons">
                  <i class="fab fa-linkedin-in fa-lg"></i>
                  <i class="fab fa-instagram fa-lg"></i>
                </div>
              </div>
              <br>
              <b><%= link_to request.event.title, event_path(request.event_id) %></b>
              <br>
              <p>Status: <%= link_to request.status, "" %></p>
              <br>
              <%= link_to "See more details",  class: "btn-standard btn-profile" %>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</section>
<section class="profile-events-section">
  <h2>My events</h2>
  <div class="profile-cards">
    <div class="row">
      <% @my_events.each do |event| %>
        <div class="col-4">
          <div class="card card-profile">
            <div class="card-body card-body-profile">
              <% if event.photo.attached?  %>
                <%= cl_image_tag event.photo.key, class: "card-img-event-profile" %>
              <% else %>
                <img class="card-img-event-profile" src="https://source.unsplash.com/PGnqT0rXWLs" alt="">
              <% end %>
              <div class="row">
                <div class="col-4 user-name-profile">
                  <p><%= @profile.first_name %> <%= @profile.age %></p>
                </div>
                <div class="col-4 profile-pic-profile">
                  <% if event.user.image.attached? %>
                    <%= cl_image_tag event.user.image.key, class: "profile-pic-index" %>
                  <% else %>
                    <img class="profile-pic-index" src="https://image.flaticon.com/icons/svg/206/206853.svg" alt="">
                  <% end %>
                </div>
                <div class="col-4 user-social-icons">
                  <i class="fab fa-linkedin-in fa-lg"></i>
                  <i class="fab fa-instagram fa-lg"></i>
                </div>
              </div>
              <br>
              <b><%= link_to event.title, event_path(event) %></b>
              <div class="cancel-edit-event">
              <%= link_to "Edit Event", edit_event_path(event) %>
              <br>
              <br>
              <%= link_to "Cancel event",
                event_path(event),
                method: :delete,
                data: { confirm: "Are you sure?" },
                class: "cancel-event" %>
              </div>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</section>
