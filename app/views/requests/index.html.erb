<header class="header-banner pt-9 pb-11 d-none d-md-block" style="background-image: linear-gradient(rgba(0,0,0,0),rgba(0,0,0,1)), url(https://images.unsplash.com/photo-1519671482749-fd09be7ccebf?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=750&q=80) ">
  <div class="container-md">
    <div class="row align-items-center">
      <div class="col">

        <!-- Heading -->
        <h1 class="font-weight-bold text-white mb-2">
          Your Request Dashboard
        </h1>

        <!-- Text -->
        <p class="font-size-lg text-white-75 mb-0">
          Here find the request for events you attend and host ðŸ¤˜ <a class="text-reset" href=""><%= current_user.email %></a>
        </p>

      </div>
      <div class="col-auto">

        <!-- Button -->
        <button class="btn btn-sm btn-gray-300-20">
          Log Out
        </button>

      </div>
    </div> <!-- / .row -->
  </div> <!-- / .container -->
</header>

<div class="position-relative">
  <div class="shape shape-bottom shape-fluid-x svg-shim text-dark">
    <svg viewBox="0 0 2880 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0 48h2880V0h-720C1442.5 52 720 0 720 0H0v48z" fill="currentColor"></path></svg>
  </div>
</div>



<main class="pb-8 pb-md-11 mt-md-n6">
  <div class="container-md">
    <div class="row">
      <div class="col-12 col-md-5">
        <div class="lcard card-bleed border-bottom border-bottom-md-0 shadow-light-lg">
          <div class="collapse d-md-block">
            <div class="lcard-body">
              <h2 class="text-muted">
                Your Events
              </h2>
              <% @host_events_requests.each do |requests| %>
              <% unless requests.empty?%>


                <div class="card p-3">
                  <div class="card-header">
                    <%= requests.first.event.title %>
                  </div>
                  <div class="card-body p-3">
                    <% requests.each do |request|  %>
                      <div class="small-card d-flex">
                        <%= cl_image_tag request.event.photo.key, class: "w-50" %>
                        <div class="card-body p-2">
                          Request no.: <%= request.id %>
                          <%= request.user.user_name  %> wants to join you!


                          Requested on: <%= request.created_at %>
                          <%= request.status %>

                          <div class="d-flex">

                            <%= simple_form_for(request, url: validate_request_path(request), html: { method: :patch }) do |f| %>
                            <%= f.button :submit, value: "accepted", class: "btn btn-block btn-primary lift" %>
                            <% end %>

                            <%= simple_form_for(request, url: validate_request_path(request), html: { method: :patch }) do |f| %>
                            <%= f.button :submit, value: "declined", class: "btn btn-block btn-primary lift" %>
                            <% end %>
                          </div>
                        </div>
                      </div>
                    <% end %>
                  </div>
                </div>
              <% end %>
            <% end %>
            </div>
          </div>
        </div>
      </div>

      <div class="col-12 col-md-5">
        <div class="lcard card-bleed border-bottom border-bottom-md-0 shadow-light-lg">
          <div class="collapse d-md-block">
            <div class="lcard-body">
              <h2 class="text-muted">
                Your Requests
              </h2>
              <% @guest_event_requests.each do |request| %>
                <div class="card card-row shadow-light-lg mb-6">
                  <div class="row no-gutters">
                    <a class="col-12 col-md-6 bg-cover card-img-left" style="background-image: url(<%= cl_image_path request.event.photo.key %>);" href="#!">

                      <!-- Image (placeholder) -->
                      <%= cl_image_tag request.event.photo.key, class: "img-fluid d-md-none invisible" %>

                      <!-- Shape -->
                      <!-- <div class="shape shape-right shape-fluid-y svg-shim text-white d-none d-md-block">
                        <svg viewBox="0 0 112 690" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M116 0H51v172C76 384 0 517 0 517v173h116V0z" fill="currentColor"></path></svg>
                      </div> -->
                    </a>
                    <div class="col-12 col-md-6">

                      <!-- Body -->
                      <a class="card-body" href="#!">

                        <!-- Heading -->
                        <h3>
                          <%= request.event.title %>
                        </h3>

                        <!-- Text -->
                        <p class="mb-0 text-muted">
                          Request no.: <%= request.id %>
                          <%= link_to request.event.title, event_path(request.event_id) %>
                          with <%= request.event.user.user_name %>
                          <%= request.created_at.strftime('%A, %b %d') %>
                        </p>

                      </a>

                      <!-- Meta -->
                      <a class="card-meta" href="#!">

                        <!-- Divider -->
                        <hr class="card-meta-divider">

                        <!-- Avatar -->
                        <div class="avatar avatar-sm mr-2">
                          <img src="assets/img/avatars/avatar-2.jpg" alt="..." class="avatar-img rounded-circle">
                        </div>

                        <!-- Author -->
                        <h6 class="text-uppercase text-muted mr-2 mb-0">
                          <%= request.status %>
                        </h6>

                        <!-- Date -->
                        <p class="h6 text-uppercase text-muted mb-0 ml-auto">
                          <time datetime="2019-05-29">May 29</time>
                        </p>

                      </a>
                    </div>
                  </div>
                </div>
              <% end %>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</main>
